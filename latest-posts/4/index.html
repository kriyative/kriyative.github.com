<html lang="en"><head><meta content="text/html; charset=UTF-8" http-equiv="content-type" /><meta charset="UTF-8" /><meta content="" name="description" /><meta name="keywords" /><meta content="Ram Krishnan" name="author" /><link href="/assets/favicon.ico" rel="icon" type="image/x-icon" /><link href="/assets/favicon.ico" rel="shortcut icon" type="image/x-icon" /><link href="/default.css" rel="stylesheet" type="text/css" /><link href="/rss.xml" rel="alternate" title="kriyative" type="application/rss+xml" /><link href="http://fonts.googleapis.com/css?family=Snowburst+One" rel="stylesheet" type="text/css" /><title>kriyative</title></head><body><header id="banner"><div class="sleeve"><hgroup id="nameplate"><h1 id="title"><a href="/">kriyative</a></h1><h2 id="description"></h2></hgroup><nav id="toc"><ul id="menu"><li class="menu-item"><a href="/archives">Archives</a></li><li class="menu-item"><a href="/tags">Tags</a></li><li class="menu-item"><a href="/rss.xml">Subscribe</a></li></ul></nav></div></header><div id="main"><div class="sleeve"><div id="content"><article class="post format-standard"><header class="post-header"><h1 class="post-title"><a href="/2013/03/02/clojure-emacs-docs-redux/"> clojure, emacs, and docs redux</a></h1><p class="post-meta">Posted on 02 Mar 2013</p></header><div class="post-content">
<p>A while back I'd <a href="http:/2009/06/21/clojure-emacs-and-javadocs/">written</a> about looking up Javadocs from Clojure mode
buffers. I got some good feedback on that post, so I thought I'd try
and expand on that and see if I could integrate other Clojure
documentation sources into a similar workflow.
</p>
<p>
<a name="w3m-javadoc-screenshot" id="w3m-javadoc-screenshot"></a>
<div class="figure">
  <a href="/assets/2013/03/02/w3m-javadoc.jpg">
    <img src="/assets/2013/03/02/w3m-javadoc.jpg" width="400"/>
  </a>
  <h1>view javadocs in emacs/w3m (click to view full size)</h1>
</div>

Looking up Clojure doc strings within Emacs is really easy. In any
Clojure code buffer, you can place your cursor at a symbol and use
<code>C-c C-d d</code> or <code>M-x slime-describe-symbol</code> to bring up the function or
var doc string.
</p>
<p>
Previously, I'd made a <code>slime-javadoc</code> command that could be
configured to search external Javadoc sources only. However, that
mechanism could be applied more generally to more sources.
</p>
<p>
The new command <code>M-x clojuredocs</code>, can show either Javadocs for Java
classes, or goes to the excellent <a href="http://clojuredocs.org">clojuredocs.org</a> site for
documentation specific to <code>clojure.core</code> and a few other namespaces
(such as <code>ring</code>), or eventually fallsback to a simple Google search.
</p>
<p>
So, after connecting to a Clojure instance (via <code>clojure-jack-in</code> or
<code>slime-connect</code>), I can invoke <code>M-x clojuredocs</code> on any symbol and get
back some relevant documentation or at the least som helpful pointers
from Google.
</p>
<p>
I've committed an initial version of the Emacs Lisp code into the
following github repo:
</p>
<p>
<a href="http://github.com/kriyative/clojure-emacs-hacks">http://github.com/kriyative/clojure-emacs-hacks</a>
</p>
<p>
Feedback and bug reports are most welcome.
</p></div><footer class="post-footer" /></article><article class="post format-standard"><header class="post-header"><h1 class="post-title"><a href="/2013/02/20/new-site/"> New Site</a></h1><p class="post-meta">Posted on 20 Feb 2013</p></header><div class="post-content">
<p>This is my shiny new site hosted on github.com. I used to previously
blog at <a href="http://funcall.posterous.com">funcall.posterous.com</a> and <a href="http://cynojure.posterous.com">cynojure.posterous.com</a>, but I think
<a href="http://github.com">github</a> may be a more natural fit for my edit and publish workflow.
After all, most of my professional and hobbyist programming work lives
here, so why not my blog.
</p>
<p>
Incidentally, I'm using <a href="http://orgmode.org/">org-mode</a> in <a href="http://www.gnu.org/software/emacs/">Emacs</a> to author the posts and a
modified version of the <a href="http://nakkaya.com/static.html">static</a> blog generation tool to generate the
HTML and RSS.
</p></div><footer class="post-footer" /></article><article class="post format-standard"><header class="post-header"><h1 class="post-title"><a href="/2012/07/28/emacs-for-clojure-2/">Emacs for Clojure - Part 2</a></h1><p class="post-meta">Posted on 28 Jul 2012</p></header><div class="post-content">
<p>This is the second in a two part post about a Clojure programmer
workflow entirely within Emacs.
</p>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Editing Clojure</h2>
<div class="outline-text-2" id="text-1">


<p>
Some useful navigation key bindings in Clojure-mode, actually any Lisp
code editing mode in Emacs, are as follows:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left">Keybinding</th><th scope="col" class="left">Command</th></tr>
</thead>
<tbody>
<tr><td class="left"><code>C-M-f</code></td><td class="left"><code>forward-sexp</code></td></tr>
<tr><td class="left"><code>C-M-b</code></td><td class="left"><code>backward-sexp</code></td></tr>
<tr><td class="left"><code>C-M-a</code></td><td class="left"><code>beginning-of-defun</code></td></tr>
<tr><td class="left"><code>C-M-e</code></td><td class="left"><code>end-of-defun</code></td></tr>
<tr><td class="left"><code>C-M-x</code></td><td class="left"><code>slime-compile-defun</code></td></tr>
<tr><td class="left"><code>C-x C-e</code></td><td class="left"><code>slime-eval-last-expression</code></td></tr>
</tbody>
</table>


<p>
Some of these key bindings get redefined when a buffer is in
<code>slime-mode</code> to SLIME enhanced equivalents, but mostly they behave the
same.
</p>
<p>
And, don't forget the exponential effect of the <code>C-u</code> prefix key.
</p>
<p>
Some other key bindings that are also useful are:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left">Keybinding</th><th scope="col" class="left">Command</th><th scope="col" class="left">Doc</th></tr>
</thead>
<tbody>
<tr><td class="left"><code>C-M-q</code></td><td class="left"><code>indent-sexp</code></td><td class="left">A lot of times when copying and pasting or otherwise modifying large blocks of s-expressions, the indentation of the code can get out of whack. <code>indent-sexp</code> can help restore the balance.</td></tr>
<tr><td class="left"><code>C-M-h</code></td><td class="left"><code>mark-defun</code></td><td class="left"></td></tr>
<tr><td class="left"><code>C-M-k</code></td><td class="left"><code>kill-sexp</code></td><td class="left"></td></tr>
</tbody>
</table>


<p>
Also worth knowing, the magic of <i>dynamic abbrevs</i> bound to the
<code>M-/</code> key binding. Dynamic abbrevs are a quick way to
complete a long function or var name from a minimal prefix. It's very
brute force (i.e, just searches for a match in all the open buffers),
but since it's very fast, it comes in handy when you're working with
partially evaluated Clojure code.
</p>

</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Clojure REPL</h2>
<div class="outline-text-2" id="text-2">


<p>
Everything begins with a Clojure instance which has SWANK loaded.
Again, there are lots of ways of starting one of these, and the most
common use case is with a <a href="https://github.com/technomancy/leiningen/">Leiningen</a> project setup. Setting up
Leiningen is beyond the scope of this post, but the docs on
Leiningen's github page are quite helpful in getting you started.
</p>
<p>
Once Leiningen is setup and you have a <code>project.clj</code> file for your
project, you can invoke <code>clojure-jack-in</code>.
</p>
<p>
Once SLIME is connected, it's helpful to know the following commands:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left">Keybinding</th><th scope="col" class="left">Command</th><th scope="col" class="left">Doc</th></tr>
</thead>
<tbody>
<tr><td class="left"></td><td class="left"><code>slime-repl</code></td><td class="left">This is a quick way to jump to the <code>*slime-repl clojure*</code> buffer.</td></tr>
<tr><td class="left"></td><td class="left"><code>slime-reset</code></td><td class="left">When your SLIME connection goes out of whack.</td></tr>
<tr><td class="left"><code>C-M-i</code></td><td class="left"><code>slime-complete-symbol</code></td><td class="left"></td></tr>
<tr><td class="left"><code>C-x e</code></td><td class="left"><code>slime-eval-last-expression</code></td><td class="left">Makes every Clojure buffer into a REPL. Plus, it is very handy when iterating on tests.</td></tr>
<tr><td class="left"><code>C-c C-c</code>, <code>C-M-x</code></td><td class="left"><code>slime-compile-defun</code></td><td class="left">This is convenient for compiling a <code>defn</code> or other top-level form, without having to put the cursor at the end of the expression.</td></tr>
<tr><td class="left"></td><td class="left"><code>slime-list-connections</code></td><td class="left">If you find yourself having to connect to multiple SWANK servers this command is helpful in switching between them.</td></tr>
<tr><td class="left"></td><td class="left"><code>slime-list-threads</code></td><td class="left">Show the list of scheduled JVM threads, and can provides an interactive way to kill running threads. Use with caution.</td></tr>
</tbody>
</table>


</div>
</div>
</div><footer class="post-footer" /></article><article class="post format-standard"><header class="post-header"><h1 class="post-title"><a href="/2012/07/21/emacs-for-clojure-1/">Emacs for Clojure - Part 1</a></h1><p class="post-meta">Posted on 21 Jul 2012</p></header><div class="post-content">
<p>This is a brief overview of the way I work in Clojure using Emacs -
almost exclusively. Obviously, Emacs is not the only way to interact
with Clojure, but it can be a pretty seamless and efficient
environment for Clojure, once you become familiar with the powerful
extensibility and "mouse-free" efficiency of Emacs.
</p>
<p>
Also, since Emacs uses Lisp as its extension language, there's a lot
of value for a Clojure/Lisp developer in learning and mastering the
Emacs' ecosystem. I hope this series of posts will be helpful in that
endeavour.
</p>
<p>
There are lots of "getting started with Emacs" docs available online
and on the web. The easiest one is the built-in <a href="http://git.savannah.gnu.org/cgit/emacs.git/plain/etc/tutorials/TUTORIAL?h=emacs-24">Tutorial</a>, which you
can also bring up within Emacs with <code>C-h t</code> or <code>M-x help-with-tutorial</code>.  Other online references:
</p>
<ol>
<li><a href="http://www.gnu.org/software/emacs/tour/">A Guided Tour of Emacs</a>

</li>
<li><a href="http://www2.lib.uchicago.edu/keith/tcl-course/emacs-tutorial.html">A Tutorial Introduction to GNU Emacs</a>
</li>
</ol>



<p>
For the most part, I'm going to assume you're using Emacs default key
bindings, but the following customizations don't really depend on
that.
</p>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Process</h2>
<div class="outline-text-2" id="text-1">


<p>
My typical work-flow involves the following steps (but not necessarily
in the same order always):
</p>
<pre class="example">
(loop []
  ;; Edit code/tests
  ;; Interactive development with REPL and tests
  ;; Look up documentation
  ;; Search and Navigate a code tree
  ;; Run batch tests
  ;; Merge commits and resolve conflicts in Git
  (recur))
</pre>


<p>
I'll try to cover each of these steps in detail over the course of the
next few posts.
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Clojure Mode Setup</h2>
<div class="outline-text-2" id="text-2">


<p>
Like snowflakes and Sting albums, there are myriad ways of setting up
the Clojure environment in Emacs, but essentially all of them should
be doing something similar to the following:
</p>
<pre class="example">
(defun clojure-mode-hook ()
  (setq indent-tabs-mode nil
        clojure-mode-use-backtracking-indent t)
  (setup-clojure-indentation-rules))
(require 'clojure-mode)
(require 'clojure-test-mode)
(require 'swank-clojure)
(add-hook 'clojure-mode-hook 'clojure-mode-hook)
(add-hook 'clojure-mode-hook 'clojure-test-mode)
</pre>


<p>
If you are using Emacs 24 and have never setup Clojure-mode or SLIME
before, check out the <a href="https://github.com/technomancy/emacs-starter-kit">emacs-starter-kit</a>.
</p>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">Basic Editing</h2>
<div class="outline-text-2" id="text-3">


<p>
It's good to get familiar with the basic cursor movement keys such as:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left">Keybinding</th><th scope="col" class="left">Command</th></tr>
</thead>
<tbody>
<tr><td class="left"><code>C-n</code></td><td class="left"><code>next-line</code></td></tr>
<tr><td class="left"><code>C-p</code></td><td class="left"><code>previous-line</code></td></tr>
<tr><td class="left"><code>C-f</code></td><td class="left"><code>forward-char</code></td></tr>
<tr><td class="left"><code>C-b</code></td><td class="left"><code>backward-char</code></td></tr>
<tr><td class="left"><code>C-a</code></td><td class="left"><code>move-beginning-of-line</code></td></tr>
<tr><td class="left"><code>C-e</code></td><td class="left"><code>move-end-of-line</code></td></tr>
</tbody>
</table>


<p>
There's been a lot of cursing and teeth gnashing about Emacs' default
key bindings, but here are some of the benefits that I've come to
appreciate over time:
</p>
<ol>
<li>Clustering &ndash; you can insert and move around with minimal physical
   movement from the <i>home row</i> of the keyboard.

</li>
<li>Easy to remember

</li>
<li>Work in <code>bash</code> and even on tty devices (never say never) - this is
   particularly useful if you're planning to do some remote pairing
   over <code>tmux</code> or <code>screen</code>
</li>
</ol>


<p>
And, there is always <code>C-h b</code> <code>describe-bindings</code> which will list the
key bindings in any given buffer.
</p>
<p>
Other useful basic key bindings:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left">Keybinding</th><th scope="col" class="left">Command</th><th scope="col" class="left">Doc</th></tr>
</thead>
<tbody>
<tr><td class="left"><code>C-l</code></td><td class="left"><code>recenter</code></td><td class="left">redraw buffer with the current line at the vertical center of the window; one useful variation is to <code>C-u 0 C-l</code> which will redraw the buffer with the current line at the top of the window</td></tr>
<tr><td class="left"><code>C-SPC</code></td><td class="left"><code>set-mark-command</code></td><td class="left">set the beginning of a copy/cut region, and move the cursor to the end of the region</td></tr>
<tr><td class="left"><code>C-w</code></td><td class="left"><code>kill-region</code></td><td class="left">cut the contents of the selected region</td></tr>
<tr><td class="left"><code>M-w</code></td><td class="left"><code>kill-ring-save</code></td><td class="left">copy (not cut) the contents of the selected region</td></tr>
<tr><td class="left"><code>C-y</code></td><td class="left"><code>yank</code></td><td class="left">paste the most recently copied/cut region at cursor point</td></tr>
<tr><td class="left"><code>M-y</code></td><td class="left"><code>yank-pop</code></td><td class="left">when used after a <code>yank</code>, Emacs will replace the pasted region with older copied text cycling through the cut/copy history</td></tr>
<tr><td class="left"><code>C-x r k</code></td><td class="left"><code>kill-rectangle</code></td><td class="left">mark a region as you would normally, but cut a rectangular sub-region. Useful when working with columns of data</td></tr>
<tr><td class="left"><code>C-x r y</code></td><td class="left"><code>yank-rectangle</code></td><td class="left">paste the most recently killed rectangular region</td></tr>
</tbody>
</table>


</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">Keyboard Macros</h2>
<div class="outline-text-2" id="text-4">


<p>
We've all been in situations where we've had to fix up some literal
data structure or otherwise munge code by repeating a set of editing
keystrokes, either deleting, inserting or otherwise splicing
text. Keyboard macros can quickly help automate some of this work.
</p>
<p>
The basic principle is that you begin recording a macro <code>C-x (</code>
<code>kmacro-start-macro</code>, perform the keyboard actions, and then end
recording with <code>C-x )</code> <code>kmacro-end-macro</code>. You can then replay the
macro using <code>C-x e</code> <code>kmacro-end-and-call-macro</code>. Also, check out
<code>C-x C-k n</code> <code>kmacro-name-last-macro</code> for oft repeated macros.
</p>
<p>
<i>Next post:</i> REPL, SLIME and interactive programming.
</p></div>
</div>
</div><footer class="post-footer" /></article><article class="post format-standard"><header class="post-header"><h1 class="post-title"><a href="/2011/03/26/ecl-for-ios-updated/">ECL for iOS update for ECL-11.1.1, Xocde 4, and SDK 4.3</a></h1><p class="post-meta">Posted on 26 Mar 2011</p></header><div class="post-content">
<p>I've committed a new branch of ECL for iOS, which now requires
ECL-11.1.1 (latest stable), and produces functioning device binaries
for armv6 and armv7 architectures using Xcode 4 and SDK 4.3. This
release has been tested on iPhone and iPad devices running iOS 4.3.1.
</p>
<p>
Please refer to the updated README for further details.
</p>
<p>
<a href="https://github.com/kriyative/ecl-iphone-builder/tree/elf">https://github.com/kriyative/ecl-iphone-builder/tree/elf</a>
</p>
<p>
Please note that the earlier release branch `dragon' has also been
updated to work with Xcode 4, and SDK 4.3. However, it continues to be
based on ECL-10.4.1.
</p>
<p>
<a href="https://github.com/kriyative/ecl-iphone-builder/tree/dragon">https://github.com/kriyative/ecl-iphone-builder/tree/dragon</a>
</p>
<p>
Many thanks to <a href="http://mclide.in-progress.com/">Terje Norderhaug</a> for his help with this update.
</p></div><footer class="post-footer" /></article><div class="pager-left"><a href="/latest-posts/3/">&laquo; Older Entries</a></div></div><aside id="sidebar"><section class="panel"><p><img id="profile-pic" src="http://www.gravatar.com/avatar/6dcf36ddd0aa73e04e125e3c10f6ff05.png" />Hi, I'm Ram Krishnan - a <a href="http://en.wikipedia.org/wiki/Lisp_(programming_language)">Lisp</a> programmer and software entrepreneur.</p></section><section class="panel"><h1>Links</h1><ul><li><a href="https://github.com/kriyative">Github</a></li><li><a href="http://www.ingeniousmonkey.com">IngeniousMonkey</a></li></ul><p>I sometimes post on <a href="http://twitter.com/funcall">twitter</a>.</p></section><section class="panel"><h1>Recent posts</h1><ul><li><a href="/2013/03/02/clojure-emacs-docs-redux/"> clojure, emacs, and docs redux</a></li><li><a href="/2013/02/20/new-site/"> New Site</a></li><li><a href="/2012/07/28/emacs-for-clojure-2/">Emacs for Clojure - Part 2</a></li><li><a href="/2012/07/21/emacs-for-clojure-1/">Emacs for Clojure - Part 1</a></li><li><a href="/2011/03/26/ecl-for-ios-updated/">ECL for iOS update for ECL-11.1.1, Xocde 4, and SDK 4.3</a></li><li><a href="/2011/01/10/clojurejs-announcement/">clojurejs -- a Clojure (subset) to Javascript translator</a></li><li><a href="/2010/12/20/lisp-functions-ui-callbacks-ecl-ios/">Lisp functions as UI callbacks in ECL/iOS</a></li><li><a href="/2010/12/14/ecl-for-ios-updated/">ECL for iOS updated to work with SDK 4.2</a></li><li><a href="/2010/03/23/daily-org-agenda-reminder/">Displaying a daily Org-mode agenda reminder in Emacs</a></li><li><a href="/2010/02/10/snapshot-of-ecl-for-iphone/">Snapshot of ECL for iPhone</a></li></ul></section></aside></div></div><footer id="addendum"><div class="sleeve"><p id="copyright">Copyright © 2012–2013 Ram Krishnan</p></div></footer><script type="text/javascript">var _gaq = _gaq || [];
       _gaq.push(['_setAccount', 'UA-3082079-6']);
       _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
       })();</script></body></html>