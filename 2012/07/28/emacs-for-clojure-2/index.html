<html lang="en"><head><meta content="text/html; charset=UTF-8" http-equiv="content-type" /><meta charset="UTF-8" /><meta name="description" /><meta content="clojure emacs" name="keywords" /><meta content="Ram Krishnan" name="author" /><link href="/assets/favicon.ico" rel="icon" type="image/x-icon" /><link href="/assets/favicon.ico" rel="shortcut icon" type="image/x-icon" /><link href="/default.css" rel="stylesheet" type="text/css" /><link href="/rss.xml" rel="alternate" title="kriyative" type="application/rss+xml" /><link href="http://fonts.googleapis.com/css?family=Snowburst+One" rel="stylesheet" type="text/css" /><link href="http://kriyative.github.com/2012/07/28/emacs-for-clojure-2/" rel="canonical" /><title>Emacs for Clojure - Part 2</title></head><body><header id="banner"><div class="sleeve"><hgroup id="nameplate"><h1 id="title"><a href="/">kriyative</a></h1><h2 id="description"></h2></hgroup><nav id="toc"><ul id="menu"><li class="menu-item"><a href="/archives">Archives</a></li><li class="menu-item"><a href="/tags">Tags</a></li><li class="menu-item"><a href="/rss.xml">Subscribe</a></li></ul></nav></div></header><div id="main"><div class="sleeve"><div id="content"><article class="post format-standard"><header class="post-header"><h1 class="post-title">Emacs for Clojure - Part 2</h1><p class="post-meta">Posted on 28 Jul 2012</p></header><div class="post-content">
<p>This is the second in a two part post about a Clojure programmer
workflow entirely within Emacs.
</p>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Editing Clojure</h2>
<div class="outline-text-2" id="text-1">


<p>
Some useful navigation key bindings in Clojure-mode, actually any Lisp
code editing mode in Emacs, are as follows:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left">Keybinding</th><th scope="col" class="left">Command</th></tr>
</thead>
<tbody>
<tr><td class="left"><code>C-M-f</code></td><td class="left"><code>forward-sexp</code></td></tr>
<tr><td class="left"><code>C-M-b</code></td><td class="left"><code>backward-sexp</code></td></tr>
<tr><td class="left"><code>C-M-a</code></td><td class="left"><code>beginning-of-defun</code></td></tr>
<tr><td class="left"><code>C-M-e</code></td><td class="left"><code>end-of-defun</code></td></tr>
<tr><td class="left"><code>C-M-x</code></td><td class="left"><code>slime-compile-defun</code></td></tr>
<tr><td class="left"><code>C-x C-e</code></td><td class="left"><code>slime-eval-last-expression</code></td></tr>
</tbody>
</table>


<p>
Some of these key bindings get redefined when a buffer is in
<code>slime-mode</code> to SLIME enhanced equivalents, but mostly they behave the
same.
</p>
<p>
And, don't forget the exponential effect of the <code>C-u</code> prefix key.
</p>
<p>
Some other key bindings that are also useful are:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left">Keybinding</th><th scope="col" class="left">Command</th><th scope="col" class="left">Doc</th></tr>
</thead>
<tbody>
<tr><td class="left"><code>C-M-q</code></td><td class="left"><code>indent-sexp</code></td><td class="left">A lot of times when copying and pasting or otherwise modifying large blocks of s-expressions, the indentation of the code can get out of whack. <code>indent-sexp</code> can help restore the balance.</td></tr>
<tr><td class="left"><code>C-M-h</code></td><td class="left"><code>mark-defun</code></td><td class="left"></td></tr>
<tr><td class="left"><code>C-M-k</code></td><td class="left"><code>kill-sexp</code></td><td class="left"></td></tr>
</tbody>
</table>


<p>
Also worth knowing, the magic of <i>dynamic abbrevs</i> bound to the
<code>M-/</code> key binding. Dynamic abbrevs are a quick way to
complete a long function or var name from a minimal prefix. It's very
brute force (i.e, just searches for a match in all the open buffers),
but since it's very fast, it comes in handy when you're working with
partially evaluated Clojure code.
</p>

</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Clojure REPL</h2>
<div class="outline-text-2" id="text-2">


<p>
Everything begins with a Clojure instance which has SWANK loaded.
Again, there are lots of ways of starting one of these, and the most
common use case is with a <a href="https://github.com/technomancy/leiningen/">Leiningen</a> project setup. Setting up
Leiningen is beyond the scope of this post, but the docs on
Leiningen's github page are quite helpful in getting you started.
</p>
<p>
Once Leiningen is setup and you have a <code>project.clj</code> file for your
project, you can invoke <code>clojure-jack-in</code>.
</p>
<p>
Once SLIME is connected, it's helpful to know the following commands:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<thead>
<tr><th scope="col" class="left">Keybinding</th><th scope="col" class="left">Command</th><th scope="col" class="left">Doc</th></tr>
</thead>
<tbody>
<tr><td class="left"></td><td class="left"><code>slime-repl</code></td><td class="left">This is a quick way to jump to the <code>*slime-repl clojure*</code> buffer.</td></tr>
<tr><td class="left"></td><td class="left"><code>slime-reset</code></td><td class="left">When your SLIME connection goes out of whack.</td></tr>
<tr><td class="left"><code>C-M-i</code></td><td class="left"><code>slime-complete-symbol</code></td><td class="left"></td></tr>
<tr><td class="left"><code>C-x e</code></td><td class="left"><code>slime-eval-last-expression</code></td><td class="left">Makes every Clojure buffer into a REPL. Plus, it is very handy when iterating on tests.</td></tr>
<tr><td class="left"><code>C-c C-c</code>, <code>C-M-x</code></td><td class="left"><code>slime-compile-defun</code></td><td class="left">This is convenient for compiling a <code>defn</code> or other top-level form, without having to put the cursor at the end of the expression.</td></tr>
<tr><td class="left"></td><td class="left"><code>slime-list-connections</code></td><td class="left">If you find yourself having to connect to multiple SWANK servers this command is helpful in switching between them.</td></tr>
<tr><td class="left"></td><td class="left"><code>slime-list-threads</code></td><td class="left">Show the list of scheduled JVM threads, and can provides an interactive way to kill running threads. Use with caution.</td></tr>
</tbody>
</table>


</div>
</div>
</div><footer class="post-footer" /></article></div><aside id="sidebar"><section class="panel"><p><img id="profile-pic" src="http://www.gravatar.com/avatar/6dcf36ddd0aa73e04e125e3c10f6ff05.png" />Hi, I'm Ram Krishnan - a <a href="http://en.wikipedia.org/wiki/Lisp_(programming_language)">Lisp</a> programmer and software entrepreneur.</p></section><section class="panel"><h1>Links</h1><ul><li><a href="https://github.com/kriyative">Github</a></li><li><a href="http://www.ingeniousmonkey.com">IngeniousMonkey</a></li></ul><p>I sometimes post on <a href="http://twitter.com/funcall">twitter</a>.</p></section><section class="panel"><h1>Recent posts</h1><ul><li><a href="/2013/02/20/new-site/"> New Site</a></li><li><a href="/2012/07/28/emacs-for-clojure-2/">Emacs for Clojure - Part 2</a></li><li><a href="/2012/07/21/emacs-for-clojure-1/">Emacs for Clojure - Part 1</a></li><li><a href="/2011/03/26/ecl-for-ios-updated/">ECL for iOS update for ECL-11.1.1, Xocde 4, and SDK 4.3</a></li><li><a href="/2011/01/10/clojurejs-announcement/">clojurejs -- a Clojure (subset) to Javascript translator</a></li><li><a href="/2010/12/20/lisp-functions-ui-callbacks-ecl-ios/">Lisp functions as UI callbacks in ECL/iOS</a></li><li><a href="/2010/12/14/ecl-for-ios-updated/">ECL for iOS updated to work with SDK 4.2</a></li><li><a href="/2010/03/23/daily-org-agenda-reminder/">Displaying a daily Org-mode agenda reminder in Emacs</a></li><li><a href="/2010/02/10/snapshot-of-ecl-for-iphone/">Snapshot of ECL for iPhone</a></li><li><a href="/2010/01/29/my-other-lisp-blog/">my other lisp blog</a></li></ul></section></aside></div></div><footer id="addendum"><div class="sleeve"><p id="copyright">Copyright © 2012–2013 Ram Krishnan</p></div></footer><script type="text/javascript">var _gaq = _gaq || [];
       _gaq.push(['_setAccount', 'UA-3082079-6']);
       _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
       })();</script></body></html>